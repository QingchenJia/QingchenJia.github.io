---
title: CentOS7.6虚拟机基础配置
typora-root-url: CentOS7.6虚拟机基础配置
date: 2024-12-29 18:51:04
tags:
---
### 一、引言

开发过程中，使用`Windows`进行命令行操作十分不便，引入`Linux`的虚拟机进行辅助无疑是一个好的选择。`Linux`不同于`Windows`，其`GUI`偏弱，因此需要通过命令行的方式来完成对应的配置，这里主要以`CentOS7.6`版本操作系统为例进行演示。

### 二、基础配置

#### 1.静态IP设置

##### 1）设置NAT模式的网络适配器

在创建虚拟机配置文件时，网络适配器选择`NAT`模式。

![](../CentOS7-6虚拟机基础配置/CentOS7.6VM-1.png)

使用`NAT`模式能够在物理机上划分出一片子网，用以分配`IP`给配置在该物理机上的虚拟机。各虚拟机访问互联网均须通过物理机传输网络，而不是与物理机享有同等地位。

##### 2）检查NAT设置详情

点击`VMware Workstation`菜单栏中编辑->虚拟网络编辑器->`NAT`设置，查看`NAT`模式下的详细参数。

![](../CentOS7-6虚拟机基础配置/CentOS7.6VM-2.png)

`NAT`为虚拟机划分了的子网`IP`为192.168.19.0，重点关注子网掩码255.255.255.0和网关`IP`192.168.19.2。

##### 3）修改IP地址文件

进入`CentOS7.6`操作系统，打开终端，进入`/etc/sysconfig/network-scripts`目录中，对`ifcfg-ens33`文件进行修改。

```bash
vim /etc/sysconfig/network-scripts/ifcfg-ens33
```

将`BOOTPROTO`项由`dhcp`修改为`static`，并在文件末尾增加`IPADDR`、`NETMASK`和`GATEWAY`三个配置项，其余不变。修改完成后，保存并退出文件。

```text
TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=static	# dhcp->static
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=ens33
UUID=b06c2775-f93e-4bf7-b2ca-94126d9456b2
DEVICE=ens33
ONBOOT=yes
IPADDR=192.168.19.130	# ip地址
NETMASK=255.255.255.0	# 子网掩码
GATEWAY=192.168.19.2	# 网关
PEERDNS=no
PEERROUTES=no
```

再进入`/etc`目录中，对`resolv.conf`文件进行修改。

```bash
vim /etc/resolv.conf
```

新增一条`nameserver`，值与网关相同，即虚拟机网络的`DNS`配置。修改完成后，保存并退出文件。

```text
# Generated by NetworkManage
nameserver 192.168.19.2
```

完成上述操作后，重启操作系统的网络服务。

```bash
systemctl restart network
```

检查网络服务状态，若状态为标绿的`active`即代表网络服务重启成功。

```bash
systemctl status network
```

#### 2.远程SSH连接

##### 1）安装并启动SSH服务

如果未安装`SSH`服务，可以使用以下命令进行安装。

```bash
yum install -y openssh-server
```
启动`SSH`服务，并检查其状态是否启动成功。如果`SSH`服务运行正常，状态应显示为`active (running)`。
```bash
systemctl start sshd
systemctl status sshd
```

将`SSH`服务设置为开机自启动项。

```bash
systemctl enable sshd
```

##### 2）使用远程终端连接

使用`FinalShell`进行`SSH`连接，名称可任意编辑，主机填写成功配置的静态`IP`地址，端口号默认为22。认证方法采用密码，使用管理员密码以`root`身份连接。

![](../CentOS7-6虚拟机基础配置/CentOS7.6VM-3.png)

#### 3.更换国内yum源

##### 1）访问[阿里云镜像站](https://developer.aliyun.com/mirror)

找到`centos`，访问其镜像源配置。

![](../CentOS7-6虚拟机基础配置/CentOS7.6VM-4.png)

##### 2）配置阿里云yum源

备份原始`yum`仓库源配置，将整个文件夹进行复制，以备错误时进行还原。

```bash
cp /etc/yum.repos.d /etc/yum.repos.d.bak
```

下载新的`CentOS-Base.repo`到`/etc/yum.repos.d`。

```bash
wget -O /etc/yum.repos.d/CentOS-Base.repo https://mirrors.aliyun.com/repo/Centos-7.repo
```

运行`yum`命令生成缓存。

```bash
yum makecache
```

#### 4.关闭操作系统GUI

`Linux`操作系统主要用作服务器，`GUI`功能并非所长，且占用一定的系统性能，因此关闭`GUI`保证系统性能更多的保障服务运行。

永久禁用`GUI`服务，修改默认启动目标为多用户模式。

```bash
systemctl set-default multi-user.target
```

命令执行完毕后，重启操作系统即可进入纯命令行模式。

```bash
reboot
```

关闭`GUI`服务以后，可以通过`VMware Workstation`外部按钮或通过`poweroff`命令进行关机。

```bash
poweroff
```

### 三、写在最后

无论习惯于何种操作系统的使用，`Linux`操作系统都是开发者的必修课，熟悉基本配置能够帮助开发者在使用过程中更加轻松，从而提高开发效率。
